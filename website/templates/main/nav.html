<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Guidance Portal | Futa Student</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.1.2/dist/tailwind.min.css" rel="stylesheet">
    <link rel="shortcut icon" href="{{ url_for('static', filename='images/logo.jpeg') }}" type="image/x-icon">
    {% block style %}

    {% endblock style %}
</head>
<body class="bg-gray-100">
    <nav class="bg-white shadow-lg fixed top-0 w-full z-10">
        <div class="max-w-7xl mx-auto px-2 sm:px-6 lg:px-8">
            <div class="relative flex items-center justify-between h-16">
                <div class="absolute inset-y-0 left-0 flex items-center sm:hidden">
                    <button type="button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white" aria-controls="mobile-menu" aria-expanded="false" id="mobile-menu-button">
                        <span class="sr-only">Open main menu</span>
                        <svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                        </svg>
                        <svg class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                <div class="flex-1 flex items-center justify-center sm:items-stretch sm:justify-start">
                    <div class="flex-shrink-0">
                        <img class="h-8 w-8" src="{{ url_for('static', filename='images/logo.jpeg') }}" alt="Logo">
                    </div>
                    <div class="hidden sm:block sm:ml-6">
                        <div class="flex space-x-4">
                            <a href="/" class="text-gray-900 hover:bg-blue-800 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Home</a>
                            <a href="/course_registration" class="text-gray-900 hover:bg-blue-800 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Course Registration</a>
                            <a href="/grade_tracking" class="text-gray-900 hover:bg-blue-800 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Grade Tracking</a>
                            <a href="/doctor_medicals" class="text-gray-900 hover:bg-blue-800 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Academic Calendar</a>
                            <a href="#" class="text-gray-900 hover:bg-blue-800 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Campus Resources</a>
                        </div>
                    </div>
                </div>
                <div class="absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0">
                    {% if current_user.is_authenticated %}
                    <div class="ml-3 relative">
                        <div>
                            <button type="button" class="flex ring-2 text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white" id="user-menu-button" aria-expanded="false" aria-haspopup="true">
                                <svg class="h-8 w-8" xmlns="http://www.w3.org/2000/svg" width="800px" height="800px" viewBox="0 0 24 24" fill="none">
                                    <path d="M12 12C14.7614 12 17 9.76142 17 7C17 4.23858 14.7614 2 12 2C9.23858 2 7 4.23858 7 7C7 9.76142 9.23858 12 12 12Z" fill="#292D32"/>
                                    <path d="M12.0002 14.5C6.99016 14.5 2.91016 17.86 2.91016 22C2.91016 22.28 3.13016 22.5 3.41016 22.5H20.5902C20.8702 22.5 21.0902 22.28 21.0902 22C21.0902 17.86 17.0102 14.5 12.0002 14.5Z" fill="#292D32"/>
                                </svg>
                            </button>
                        </div>
                        <div class="origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 hidden" role="menu" aria-orientation="vertical" aria-labelledby="user-menu-button" id="user-menu">
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" role="menuitem"> Profile</a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" role="menuitem">Settings</a>
                            <a href="/logout" id="logoutButton" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" role="menuitem">Sign out</a>
                        </div>
                    </div>
                    {% else %}
                    <button id="login-button" class="text-gray-900 hover:bg-blue-800 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Login</button>
                    <button id="signup-button" class="text-gray-900 hover:bg-blue-800 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Sign Up</button>
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="hidden" id="mobile-menu">
            <div class="px-2 pt-2 pb-3 space-y-1">
                <a href="/" class="text-gray-900 hover:bg-blue-800 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Home</a>
                <a href="/course_registration" class="text-gray-900 hover:bg-blue-800 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Course Registration</a>
                <a href="/grade_tracking" class="text-gray-900 hover:bg-blue-800 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Grade Tracking</a>
                <a href="/doctor_medicals" class="text-gray-900 hover:bg-blue-800 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Academic Calendar</a>
                <a href="#" class="text-gray-900 hover:bg-blue-800 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Campus Resources</a>
            </div>
        </div>
    </nav>

    <div id="login-overlay" class="fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center hidden">
        <div class="bg-white p-8 rounded-lg shadow-lg w-full max-w-sm relative">
            <button id="close-overlay" class="absolute top-2 right-2 text-gray-500 hover:text-gray-700">
                <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <h2 class="text-2xl font-bold mb-6 text-center">Login to Your Account</h2>
            <form id="loginForm" class="space-y-6">
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
                    <input type="email" id="email" name="email" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                </div>
                <div>
                    <label for="password" class="block text-sm font-medium text-gray-700">Password</label>
                    <input type="password" id="password" name="password" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                </div>
                <button type="submit" class="w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500">Login</button>
                <a href="{{ url_for('auth.google_login') }}" class="w-full bg-white text-gray-700 border border-gray-300 py-2 px-4 rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-300 flex items-center justify-center">
                    <svg class=" h-5 w-5 mr-2" xmlns="http://www.w3.org/2000/svg" width="800px" height="800px" viewBox="0 0 32 32" fill="none">
                        <path d="M30.0014 16.3109C30.0014 15.1598 29.9061 14.3198 29.6998 13.4487H16.2871V18.6442H24.1601C24.0014 19.9354 23.1442 21.8798 21.2394 23.1864L21.2127 23.3604L25.4536 26.58L25.7474 26.6087C28.4458 24.1665 30.0014 20.5731 30.0014 16.3109Z" fill="#4285F4"/>
                        <path d="M16.2863 29.9998C20.1434 29.9998 23.3814 28.7553 25.7466 26.6086L21.2386 23.1863C20.0323 24.0108 18.4132 24.5863 16.2863 24.5863C12.5086 24.5863 9.30225 22.1441 8.15929 18.7686L7.99176 18.7825L3.58208 22.127L3.52441 22.2841C5.87359 26.8574 10.699 29.9998 16.2863 29.9998Z" fill="#34A853"/>
                        <path d="M8.15964 18.769C7.85806 17.8979 7.68352 16.9645 7.68352 16.0001C7.68352 15.0356 7.85806 14.1023 8.14377 13.2312L8.13578 13.0456L3.67083 9.64746L3.52475 9.71556C2.55654 11.6134 2.00098 13.7445 2.00098 16.0001C2.00098 18.2556 2.55654 20.3867 3.52475 22.2845L8.15964 18.769Z" fill="#FBBC05"/>
                        <path d="M16.2864 7.4133C18.9689 7.4133 20.7784 8.54885 21.8102 9.4978L25.8419 5.64C23.3658 3.38445 20.1435 2 16.2864 2C10.699 2 5.8736 5.1422 3.52441 9.71549L8.14345 13.2311C9.30229 9.85555 12.5086 7.4133 16.2864 7.4133Z" fill="#EB4335"/>
                    </svg>
                    Continue with Google
                </a>
            </form>
        </div>
    </div>

   <!--- notification-message-->
    <div id="notification" class="fixed top-0 inset-x-0 p-4 bg-red-600 text-white text-center transform -translate-y-full transition-transform duration-300">
        <span id="notification-message"></span>
    </div>

    <div id="signup-overlay" class="fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center hidden">
        <div class="bg-white p-8 rounded-lg shadow-lg w-full max-w-sm relative">
            <button id="close-signup-overlay" class="absolute top-2 right-2 text-gray-500 hover:text-gray-700">
                <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <h2 class="text-2xl font-bold mb-6 text-center">Create Your Account</h2>
            <form id="signupForm" class="space-y-6">
                <div class="flex space-x-4">
                    <div class="w-1/2">
                        <label for="first_name" class="block text-sm font-medium text-gray-700">First Name</label>
                        <input type="text" id="first_name" name="first_name" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                    </div>
                    <div class="w-1/2">
                        <label for="last_name" class="block text-sm font-medium text-gray-700">Last Name</label>
                        <input type="text" id="last_name" name="last_name" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                    </div>
                </div>
                <div class="flex space-x-4">
                    <div class="w-1/2">
                        <label for="matriculation_number" class="block text-sm font-medium text-gray-700">Matriculation Number</label>
                        <input type="text" id="matriculation_number" name="matriculation_number" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                    </div>
                    <div class="w-1/2">
                        <label for="cgpa" class="block text-sm font-medium text-gray-700">CGPA</label>
                        <input type="text" id="cgpa" name="cgpa" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                    </div>
                </div>
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
                    <input type="email" id="email" name="email" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                </div>
                <div>
                    <label for="password" class="block text-sm font-medium text-gray-700">Password</label>
                    <input type="password" id="password" name="password" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                </div>
                <button type="submit" class="w-full bg-blue-400 text-white py-2 px-4 rounded-md hover:bg-blue-400-700 focus:outline-none focus:ring-2 focus:ring-blue-400">Sign Up</button>
                <button type="button" class="w-full bg-white text-gray-700 border border-gray-300 py-2 px-4 rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-300 flex items-center justify-center">
                    <svg class=" h-5 w-5 mr-2" xmlns="http://www.w3.org/2000/svg" width="800px" height="800px" viewBox="0 0 32 32" fill="none">
                        <path d="M30.0014 16.3109C30.0014 15.1598 29.9061 14.3198 29.6998 13.4487H16.2871V18.6442H24.1601C24.0014 19.9354 23.1442 21.8798 21.2394 23.1864L21.2127 23.3604L25.4536 26.58L25.7474 26.6087C28.4458 24.1665 30.0014 20.5731 30.0014 16.3109Z" fill="#4285F4"/>
                        <path d="M16.2863 29.9998C20.1434 29.9998 23.3814 28.7553 25.7466 26.6086L21.2386 23.1863C20.0323 24.0108 18.4132 24.5863 16.2863 24.5863C12.5086 24.5863 9.30225 22.1441 8.15929 18.7686L7.99176 18.7825L3.58208 22.127L3.52441 22.2841C5.87359 26.8574 10.699 29.9998 16.2863 29.9998Z" fill="#34A853"/>
                        <path d="M8.15964 18.769C7.85806 17.8979 7.68352 16.9645 7.68352 16.0001C7.68352 15.0356 7.85806 14.1023 8.14377 13.2312L8.13578 13.0456L3.67083 9.64746L3.52475 9.71556C2.55654 11.6134 2.00098 13.7445 2.00098 16.0001C2.00098 18.2556 2.55654 20.3867 3.52475 22.2845L8.15964 18.769Z" fill="#FBBC05"/>
                        <path d="M16.2864 7.4133C18.9689 7.4133 20.7784 8.54885 21.8102 9.4978L25.8419 5.64C23.3658 3.38445 20.1435 2 16.2864 2C10.699 2 5.8736 5.1422 3.52441 9.71549L8.14345 13.2311C9.30229 9.85555 12.5086 7.4133 16.2864 7.4133Z" fill="#EB4335"/>
                        </svg>
                    Continue with Google
                </button>
            </form>
        </div>
    </div>
    {% block content %}{% endblock content %}
    {% include "chat_bot/index.html" %}
    <footer class="bg-gray-900 text-white mt-20">
        <div class="container mx-auto py-8 px-4 ">
            <div class="flex flex-wrap justify-start gap-4">
                <div class="w-full md:w-1/2 lg:w-1/4 mb-4">
                    <h3 class="text-lg font-bold mb-2">Useful Links</h3>
                    <ul>
                        <li><a href="/course_registration" class="text-gray-300 hover:text-white">Course Registration</a></li>
                        <li><a href="/grade_tracking" class="text-gray-300 hover:text-white">Grade Tracking</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">Academic Calendar</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">Campus Resources</a></li>
                    </ul>
                </div>
                <div class="w-full md:w-1/2 lg:w-1/4 mb-4">
                    <h3 class="text-lg font-bold mb-2">Futa-Student Guide</h3>
                    <ul>
                        <li><a href="#" class="text-gray-300 hover:text-white">Privacy Policy</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">Admission Status</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">Undergraduate Portal</a></li>
                    </ul>
                </div>
            </div>
            <hr class="border-gray-800 my-6">
            <p class="text-center text-sm text-gray-400">&copy; 2024 Futa Student-Guide. All rights reserved.</p>
        </div>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const signupForm = document.getElementById('signupForm');
            const loginForm = document.getElementById('loginForm');
            const logoutButton = document.getElementById('logoutButton');
            const notification = document.getElementById('notification');
            const notificationMessage = document.getElementById('notification-message');
    
            function showNotification(message, type = 'error') {
                notificationMessage.textContent = message;
                if (type === 'success') {
                    notification.classList.remove('bg-red-600');
                    notification.classList.add('bg-green-600');
                } else {
                    notification.classList.remove('bg-green-600');
                    notification.classList.add('bg-red-600');
                }
                notification.classList.remove('-translate-y-full');
                notification.classList.add('translate-y-0');
                setTimeout(() => {
                    notification.classList.remove('translate-y-0');
                    notification.classList.add('-translate-y-full');
                }, 3000);
            }
    
            async function handleFormSubmit(event, form, endpoint) {
                event.preventDefault();
                const formData = new FormData(form);
                const data = Object.fromEntries(formData.entries());
    
                try {
                    const response = await fetch(endpoint, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(data)
                    });
                    const result = await response.json();
    
                    if (response.ok) {
                        showNotification(result.message, 'success');
                        // Reload the page after a short delay to show the notification
                        setTimeout(() => {
                            location.reload();
                        }, 1000);
                    } else {
                        showNotification(result.message, 'error');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    showNotification('An error occurred. Please try again.', 'error');
                }
            }
    
            async function handleLogout(event) {
                event.preventDefault();
    
                try {
                    const response = await fetch('/auth/logout', {
                        method: 'GET',
                    });
                    const result = await response.json();
    
                    if (response.ok) {
                        showNotification(result.message, 'success');
                        // Reload the page after a short delay to show the notification
                        setTimeout(() => {
                            location.reload();
                        }, 1000);
                    } else {
                        showNotification(result.message, 'error');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    showNotification('An error occurred. Please try again.', 'error');
                }
            }
    
            if (signupForm) {
                signupForm.addEventListener('submit', (event) => handleFormSubmit(event, signupForm, '/auth/signup'));
            }
    
            if (loginForm) {
                loginForm.addEventListener('submit', (event) => handleFormSubmit(event, loginForm, '/auth/login'));
            }
    
            if (logoutButton) {
                logoutButton.addEventListener('click', handleLogout);
            }
        });
    </script>
    
    
    <script>
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const userMenuButton = document.getElementById('user-menu-button');
        const userMenu = document.getElementById('user-menu');

        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        userMenuButton.addEventListener('click', () => {
            userMenu.classList.toggle('hidden');
        });
    </script>

    <script>
        const signupButton = document.getElementById('signup-button');
        const signupOverlay = document.getElementById('signup-overlay');
        const closeSignupOverlay = document.getElementById('close-signup-overlay');

        signupButton.addEventListener('click', () => {
            signupOverlay.classList.remove('hidden');
        });

        closeSignupOverlay.addEventListener('click', () => {
            signupOverlay.classList.add('hidden');
        });

        window.onload = function() {
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        alert("{{ message }}");
                    {% endfor %}
                {% endif %}
            {% endwith %}
        }
    </script>

    <script>
        const loginButton = document.getElementById('login-button');
        const loginOverlay = document.getElementById('login-overlay');
        const closeOverlay = document.getElementById('close-overlay');

        loginButton.addEventListener('click', () => {
            loginOverlay.classList.remove('hidden');
        });

        closeOverlay.addEventListener('click', () => {
            loginOverlay.classList.add('hidden');
        });
    </script>
</body>
</html>
